<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="PartyMapper">

<resultMap type="Party" id="partyResultMap">
		<id     property="partyNo"         			column="BOARD_NO"/>
		<result property="partyTitle"      			column="PARTY_TITLE"/>
		<result property="partyContents"     		column="PARTY_CONTENTS"/>
		<result property="partyWriter"   			column="PARTY_WRITER"/>
		<result property="partyFirstDate" 			column="PARTY_FIRST_DATE"/>
		<result property="partyLastDate"  		 	column="PARTY_LAST_DATE"/>
		<result property="partyLocation"     		column="P_LOCATION"/>
		<result property="partyFileName"     		column="PARTY_FILENAME"/>
		<result property="partyFileRename"     		column="PARTY_RENAME"/>
		<result property="partyFilePath"         	column="PARTY_FILEPATH"/>
		<result property="partyCount"   			column="PARTY_COUNT"/>
		<result property="pCreateDate"   			column="P_CREATE_DATE"/>
		<result property="pUpdateDate"   			column="P_UPDATE_DATE"/>
		<result property="pStatus"   				column="P_STATUS"/>
		
</resultMap>

<insert id="insertParty">
INSERT INTO PARTY_TBL
VALUES(
	SEQ_BOARDNO.NEXTVAL, #{partyTitle}, #{partyContents}, 
	#{partyWriter}, #{partyFirstDate}, #{partyLastDate}, #{partyLocation},
	#{partyFileName},#{partyFileRename},#{partyFilePath},
	DEFAULT, DEFAULT, DEFAULT, DEFAULT
	) 
</insert>

<select id="selectTotalCount" resultType="_int">
SELECT COUNT(*) FROM PARTY_TBL
<where>
		<if test="searchCondition.toString()== 'title'">
		PARTY_TITLE LIKE '%'||#{searchValue}||'%'
		</if>
		
		<if test="searchCondition.toString()== 'contents'">
		PARTY_CONTENTS LIKE '%'||#{searchValue}||'%'
		</if>
		
		<if test="searchCondition.toString()== 'writer'">
		PARTY_WRITER LIKE '%'||#{searchValue}||'%'
		</if>
		
		<if test="searchCondition.toString()== 'all'">
			PARTY_TITLE LIKE '%'||#{searchValue}||'%'
		OR	PARTY_CONTENTS LIKE '%'||#{searchValue}||'%'
	  	OR	PARTY_WRITER LIKE '%'||#{searchValue}||'%'
		</if>
		AND P_STATUS = 'Y' 
	</where>
	</select>

<select id="selectAllParty" resultMap="partyResultMap">
SELECT * FROM PARTY_TBL
	WHERE P_STATUS = 'Y'
	ORDER BY 1 DESC

</select>
</mapper>